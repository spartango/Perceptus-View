<!DOCTYPE html>
<html>
<head>
<title>Test Viewer</title>
    <script src='wax/ext/modestmaps.js' type='text/javascript'></script>
    <script src='wax/dist/wax.mm.js' type='text/javascript'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js' type='text/javascript'></script>
    <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.1/css/bootstrap.css">
    <link href='wax/theme/controls.css' rel='stylesheet' type='text/css' />

</head>
    <body>
    <div id='image-map'></div>
    <div id='controls'>
        <div id='boxselector-text'></div>
        <div id='draw-toggle'> 
            <button class="btn btn-primary" type="button" onClick="createBoxSelector()">Draw</button>
        </div>
    </div>
    <script type='text/javascript'>
        var boxselector;

        function createBoxSelector() {
            boxselector = new wax.mm.boxselector();
            boxselector.map(m);
            boxselector.add();
            boxselector.enable();
        }

        function displayExtent(coords) {
            $('#boxselector-text').text(
                coords.map(function(c) {
                    return '(' + Math.round(c.lat) + ',' + Math.round(c.lon) + ')';
            }).join(', '));
        }

        var tilejson = {
          tilejson: '1.0.0',
          scheme: 'xyz',
          tiles: ['https://s3.amazonaws.com/testconvertedimagebucketserve/testImage/0/{x}/{y}'],
        };

        // Setup the map
        var mm = com.modestmaps;
        var layer = new wax.mm.connector(tilejson);
        layer.provider.tileLimits = [ new mm.Coordinate(0,0,3), new mm.Coordinate(3,7,3) ];
        var m = new mm.Map('image-map',
          layer,
          new mm.Point(1024,512));
        m.coordLimits = [ new mm.Coordinate(0,0,3), new mm.Coordinate(3,7,3) ];
        m.setZoom(3);

    </script>
    </body>
</html>
